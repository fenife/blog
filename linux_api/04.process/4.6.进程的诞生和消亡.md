### 4.6.进程的诞生和消亡
本节讲述进程的诞生和消亡过程，着重讲了僵尸进程和孤儿进程的概念，进程资源回收和状态返回等。

#### 4.6.1、进程的诞生
1. 进程`0`和进程`1`（内核态）
2. `fork`
3. `vfork`

#### 4.6.2、进程的消亡
1. 正常终止和异常终止
2. 进程在运行时需要消耗系统资源（内存、IO），进程终止时理应完全释放这些资源（如果进程消亡后仍然没有释放相应资源则这些资源就丢失了）
3. linux 系统设计时规定：每一个进程退出时，操作系统会自动回收这个进程涉及到的所有的资源（譬如`malloc`申请的内容没有`free`时，当前进程结束时这些内存会被释放，譬如`open`打开的文件没有`close`的在程序终止时也会被关闭）。
但是操作系统只是回收了这个进程工作时消耗的内存和 IO，而并没有回收这个进程本身占用的内存（**8KB**，主要是`task_struct`和**栈内存**）
4. 因为进程本身的**8KB**内存操作系统不能回收需要别人来辅助回收，因此我们每个进程都需要一个帮助它收尸的人，这个人就是这个进程的父进程。

#### 4.6.3、僵尸进程
1. 子进程**先于**父进程结束。子进程结束后父进程此时并不一定立即就能帮子进程“收尸”，在这一段（子进程已经结束且父进程尚未帮其收尸）子进程就被成为**僵尸进程**。
2. 子进程除`task_struct`和**栈**外其余内存空间皆已清理
3. 父进程可以使用`wait`或`waitpid`以**显式**回收子进程的剩余待回收内存资源并且获取子进程退出状态。
4. 父进程也可以不使用`wait`或者`waitpid`回收子进程，此时父进程结束时一样会回收子进程的剩余待回收内存资源（这样设计是为了防止父进程忘记显式调用`wait`/`waitpid`来回收子进程从而造成内存泄漏）

#### 4.6.4、孤儿进程
1. 父进程先于子进程结束，子进程成为一个孤儿进程。
2. linux 系统规定：所有的孤儿进程都自动成为一个特殊进程（进程`1`，也就是`init`进程）的子进程。
